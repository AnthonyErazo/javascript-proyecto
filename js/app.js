const producto=[
    //Memorias Ram 
    {
        id: "memoriaRam01",
        nombre: "MEMORIA 16GB DDR4 KINGSTON FURY BEAST BUS 3200MHZ BLACK",
        categoria:{
            nombre:"Memoria Ram",
            id:"memoriaRam"
        },
        descripcion:{
            marca:"Kignston",
            capacidad:"16GB",
            memoria:"DDR4",
            velocidad:"3200MHz",
            iluminacion:"sin rgb"
        },
        precio:46.50,
        imagen:"./img/MemoriaRamFury3.jpg"
    },
    {
        id: "memoriaRam02",
        nombre: "MEMORIA 8GB DDR3 KINGSTON BUS 1600GHZ",
        categoria:{
            nombre:"Memoria Ram",
            id:"memoriaRam"
        },
        descripcion:{
            marca:"Kignston",
            capacidad:"8GB",
            memoria:"DDR3",
            velocidad:"1600MHz",
            iluminacion:"sin rgb"
        },
        precio:39.00,
        imagen:"./img/MemoriaRamKingston2.jpg"
    },
    {
        id: "memoriaRam03",
        nombre: "MEMORIA 8GB DDR3L ADATA UDIMM BUS 1600MHZ",
        categoria:{
            nombre:"Memoria Ram",
            id:"memoriaRam"
        },
        descripcion:{
            marca:"Adata",
            capacidad:"8GB",
            memoria:"DDR3",
            velocidad:"1600MHz",
            iluminacion:"sin rgb"
        },
        precio:30.00,
        imagen:"./img/MemoriaRamAdata.jpg"
    },
    {
        id: "memoriaRam04",
        nombre: "MEMORIA 8GB DDR4 KINGSTON FURY RENEGADE RGB BUS 3200MHz BLACK",
        categoria:{
            nombre:"Memoria Ram",
            id:"memoriaRam"
        },
        descripcion:{
            marca:"Kignston",
            capacidad:"8GB",
            memoria:"DDR4",
            velocidad:"3200MHz",
            iluminacion:"rgb"
        },
        precio:38.50,
        imagen:"./img/MemoriaRamFury.jpg"
    },
    {
        id: "memoriaRam05",
        nombre: "MEMORIA 16GB DDR5 KINGSTON FURY BEAST WHITE RGB BUS 5200MHz",
        categoria:{
            nombre:"Memoria Ram",
            id:"memoriaRam"
        },
        descripcion:{
            marca:"Kignston",
            capacidad:"16GB",
            memoria:"DDR5",
            velocidad:"5200MHz",
            iluminacion:"rgb"
        },
        precio:75.00,
        imagen:"./img/MemoriaRamFury2.jpg"
    },
    {
        id: "memoriaRam06",
        nombre: "MEMORIA 8GB DDR4 T-FORCE VULCAN Z TUF GAMING ALLIANCE BUS 3200MHz",
        categoria:{
            nombre:"Memoria Ram",
            id:"memoriaRam"
        },
        descripcion:{
            marca:"T-Force",
            capacidad:"8GB",
            memoria:"DDR4",
            velocidad:"3200MHz",
            iluminacion:"rgb"
        },
        precio:24.50,
        imagen:"./img/MemoriaRamTForce.jpg"
    },
    {
        id: "memoriaRam07",
        nombre: "MEMORIA 16GB DDR4 VIPER GAMING ELITE GRIS CON DISIPADOR BUS 2666Mhz",
        categoria:{
            nombre:"Memoria Ram",
            id:"memoriaRam"
        },
        descripcion:{
            marca:"Viper Gaming",
            capacidad:"16GB",
            memoria:"DDR4",
            velocidad:"2666MHz",
            iluminacion:"sin rgb"
        },
        precio:85.50,
        imagen:"./img/MemoriaRamViperGaming.jpg"
    },
    {
        id: "memoriaRam08",
        nombre: "MEMORIA 16GB DDR4 XPG GAMMIX D10 BLACK BUS 3200MHz",
        categoria:{
            nombre:"Memoria Ram",
            id:"memoriaRam"
        },
        descripcion:{
            marca:"Xpg",
            capacidad:"16GB",
            memoria:"DDR4",
            velocidad:"3200MHz",
            iluminacion:"rgb"
        },
        precio:39.50,
        imagen:"./img/MemoriaRamXPG.jpg"
    },
    //Procesadores Intel
    {
        id: "procesador01",
        nombre: "PROCESADOR INTEL CORE I9 10900K 3.70GHZ 20MB",
        categoria:{
            nombre:"Procesador",
            id:"procesador"
        },
        descripcion:{
            marca:"Intel",
            procesador:"Core I9-10th Gen",
            nucleos:"10",
            velocidad:"3.79GHz",
            cache:"20MB",
        },
        precio:590.00,
        imagen:"./img/ProcesadorIntel.jpg"
    },
    {
        id: "procesador02",
        nombre: "PROCESADOR INTEL CELERON G6900 3.40GHZ ",
        categoria:{
            nombre:"Procesador",
            id:"procesador"
        },
        descripcion:{
            marca:"Intel",
            procesador:"Intel Celeron",
            nucleos:"2",
            velocidad:"3.4GHz",
            cache:"4MB",
        },
        precio:68.50,
        imagen:"./img/ProcesadorIntel2.jpg"
    },
    {
        id: "procesador03",
        nombre: "PROCESADOR INTEL PENTIUM GOLD G5420 3.8GHZ 4.0MB",
        categoria:{
            nombre:"Procesador",
            id:"procesador"
        },
        descripcion:{
            marca:"Intel",
            procesador:"Intel Pentium",
            nucleos:"2",
            velocidad:"3.8GHz",
            cache:"4MB",
        },
        precio:76.80,
        imagen:"./img/ProcesadorIntel3.jpg"
    },
    {
        id: "procesador04",
        nombre: "PROCESADOR INTEL CORE I3-10100F 3.6GHZ 6.0MB",
        categoria:{
            nombre:"Procesador",
            id:"procesador"
        },
        descripcion:{
            marca:"Intel",
            procesador:"Core I3-10th Gen",
            nucleos:"4",
            velocidad:"3.6GHz",
            cache:"6MB",
        },
        precio:82.30,
        imagen:"./img/ProcesadorIntel4.jpg"
    },
    {
        id: "procesador05",
        nombre: "PROCESADOR INTEL CORE I3 10105F 3.7 GHZ 6MB",
        categoria:{
            nombre:"Procesador",
            id:"procesador"
        },
        descripcion:{
            marca:"Intel",
            procesador:"Core I3-10th Gen",
            nucleos:"4",
            velocidad:"3.7GHz",
            cache:"6MB",
        },
        precio:87.80,
        imagen:"./img/ProcesadorIntel5.jpg"
    },
    {
        id: "procesador06",
        nombre: "PROCESADOR INTEL CORE I5 10400F 2.9GHZ - 12MB",
        categoria:{
            nombre:"Procesador",
            id:"procesador"
        },
        descripcion:{
            marca:"Intel",
            procesador:"Core I5-10th Gen",
            nucleos:"6",
            velocidad:"2.9GHz",
            cache:"12MB",
        },
        precio:129.10,
        imagen:"./img/ProcesadorIntel6.jpg"
    },
    //Procesadores AMD
    {
        id: "procesador07",
        nombre: "PROCESADOR AMD RYZEN 5 5600G 3.9GHz 16MB",
        categoria:{
            nombre:"Procesador",
            id:"procesador"
        },
        descripcion:{
            marca:"AMD",
            procesador:"AMD Ryzen 5",
            nucleos:"6",
            velocidad:"3.9GHz",
            cache:"16MB",
        },
        precio:162.00,
        imagen:"./img/ProcesadorAmd.jpg"
    },
    {
        id: "procesador08",
        nombre: "PROCESADOR AMD RYZEN 3 3200G 3.6GHZ 6.0MB",
        categoria:{
            nombre:"Procesador",
            id:"procesador"
        },
        descripcion:{
            marca:"AMD",
            procesador:"AMD Ryzen 3",
            nucleos:"4",
            velocidad:"3.6GHz",
            cache:"6MB",
        },
        precio:90.60,
        imagen:"./img/ProcesadorAmd2.jpg"
    },
    {
        id: "procesador09",
        nombre: "PROCESADOR AMD RYZEN 5 4500MPK 3.6GHZ",
        categoria:{
            nombre:"Procesador",
            id:"procesador"
        },
        descripcion:{
            marca:"AMD",
            procesador:"AMD Ryzen 5",
            nucleos:"6",
            velocidad:"3.6GHz",
            cache:"8MB",
        },
        precio:129.10,
        imagen:"./img/ProcesadorAmd3.jpg"
    },
    {
        id: "procesador10",
        nombre: "PROCESADOR AMD RYZEN 3 PRO 4350G 3.8GHZ",
        categoria:{
            nombre:"Procesador",
            id:"procesador"
        },
        descripcion:{
            marca:"AMD",
            procesador:"AMD Ryzen 3",
            nucleos:"4",
            velocidad:"3.8GHz",
            cache:"4MB",
        },
        precio:118.10,
        imagen:"./img/ProcesadorAmd4.jpg"
    },
    {
        id: "procesador11",
        nombre: "PROCESADOR AMD RYZEN 5 4600G 3.7GHZ",
        categoria:{
            nombre:"Procesador",
            id:"procesador"
        },
        descripcion:{
            marca:"AMD",
            procesador:"AMD Ryzen 5",
            nucleos:"6",
            velocidad:"3.7GHz",
            cache:"8MB",
        },
        precio:134.60,
        imagen:"./img/ProcesadorAmd5.jpg"
    },
    //Placas madre Intel
    {
        id: "placaMadre01",
        nombre: "MAINBOARD GIGABYTE H470M H DDR4 LGA 1200",
        categoria:{
            nombre:"Placa Madre",
            id:"placaMadre"
        },
        descripcion:{
            marca:"Gigabyte",
            socket:"LGA 1200",
            capacidadMax:"64GB",
            expansion:"2",
            iluminacion:"sin rgb"
        },
        precio:79.60,
        imagen:"./img/PlacaMadreIntel2.jpg"
    },
    {
        id: "placaMadre02",
        nombre: "MAINBOARD MSI B560M PRO-E LGA 1200",
        categoria:{
            nombre:"Placa Madre",
            id:"placaMadre"
        },
        descripcion:{
            marca:"MSI",
            socket:"LGA 1200",
            capacidadMax:"64GB",
            expansion:"2",
            iluminacion:"sin rgb"
        },
        precio:90.60,
        imagen:"./img/PlacaMadreIntel3.jpg"
    },
    {
        id: "placaMadre03",
        nombre: "MAINBOARD MSI PRO H610M-G DDR4 LGA1700",
        categoria:{
            nombre:"Placa Madre",
            id:"placaMadre"
        },
        descripcion:{
            marca:"MSI",
            socket:"LGA 1700",
            capacidadMax:"64GB",
            expansion:"2",
            iluminacion:"sin rgb"
        },
        precio:93.30,
        imagen:"./img/PlacaMadreIntel4.jpg"
    },
    {
        id: "placaMadre04",
        nombre: "MAINBOARD ASUS PRIME H610M-K D4",
        categoria:{
            nombre:"Placa Madre",
            id:"placaMadre"
        },
        descripcion:{
            marca:"ASUS",
            socket:"LGA 1700",
            capacidadMax:"64GB",
            expansion:"2",
            iluminacion:"sin rgb"
        },
        precio:115.30,
        imagen:"./img/PlacaMadreIntel.jpg"
    },
    //Placas madre AMD
    {
        id: "placaMadre05",
        nombre: "MAINBOARD ASUS PRIME B650M-A WIFI",
        categoria:{
            nombre:"Placa Madre",
            id:"placaMadre"
        },
        descripcion:{
            marca:"ASUS",
            socket:"AM5",
            capacidadMax:"128GB",
            expansion:"4",
            iluminacion:"rgb"
        },
        precio:241.90,
        imagen:"./img/PlacaMadreAmd.jpg"
    },
    {
        id: "placaMadre06",
        nombre: "MAINBOARD MSI A320M-A PRO AM4",
        categoria:{
            nombre:"Placa Madre",
            id:"placaMadre"
        },
        descripcion:{
            marca:"MSI",
            socket:"AM4",
            capacidadMax:"64GB",
            expansion:"2",
            iluminacion:"sin rgb"
        },
        precio:54.80,
        imagen:"./img/PlacaMadreAmd2.jpg"
    },
    {
        id: "placaMadre07",
        nombre: "MAINBOARD MSI A520M-A PRO AM4",
        categoria:{
            nombre:"Placa Madre",
            id:"placaMadre"
        },
        descripcion:{
            marca:"MSI",
            socket:"AM4",
            capacidadMax:"64GB",
            expansion:"2",
            iluminacion:"sin rgb"
        },
        precio:76.80,
        imagen:"./img/PlacaMadreAmd3.jpg"
    },
    {
        id: "placaMadre08",
        nombre: "MAINBOARD GIGABYTE B450M DS3H V2 AM4",
        categoria:{
            nombre:"Placa Madre",
            id:"placaMadre"
        },
        descripcion:{
            marca:"Gigabyte",
            socket:"AM4",
            capacidadMax:"128GB",
            expansion:"4",
            iluminacion:"sin rgb"
        },
        precio:90.60,
        imagen:"./img/PlacaMadreAmd4.jpg"
    },
    {
        id: "placaMadre09",
        nombre: "MAINBOARD GIGABYTE B550M K DDR4 AM4",
        categoria:{
            nombre:"Placa Madre",
            id:"placaMadre"
        },
        descripcion:{
            marca:"Gigabyte",
            socket:"AM4",
            capacidadMax:"128GB",
            expansion:"4",
            iluminacion:"sin rgb"
        },
        precio:112.60,
        imagen:"./img/PlacaMadreAmd5.jpg"
    },
    //Fuentes de poder
    {
        id: "fuenteDePoder01",
        nombre: "FUENTE COOLER MASTER MWE 750 V2 750W 80 PLUS GOLD",
        categoria:{
            nombre:"Fuente de Poder",
            id:"fuenteDePoder"
        },
        descripcion:{
            marca:"Cooler Master",
            certificado:"80 Plus Gold",
            watts:"750w"
        },
        precio:112.00,
        imagen:"./img/FuenteDePoder.jpg"
    },
    {
        id: "fuenteDePoder02",
        nombre: "FUENTE MSI MAG A650BN 650W 80 PLUS BRONZE",
        categoria:{
            nombre:"Fuente de Poder",
            id:"fuenteDePoder"
        },
        descripcion:{
            marca:"MSI",
            certificado:"80 Plus Bronze",
            watts:"650w"
        },
        precio:72.00,
        imagen:"./img/FuenteDePoder2.jpg"
    },
    {
        id: "fuenteDePoder03",
        nombre: "FUENTE ANTRYX B500 V3 500W BLACK",
        categoria:{
            nombre:"Fuente de Poder",
            id:"fuenteDePoder"
        },
        descripcion:{
            marca:"ANTRYX",
            watts:"500w"
        },
        precio:29.00,
        imagen:"./img/FuenteDePoder3.jpg"
    },
    {
        id: "fuenteDePoder04",
        nombre: "FUENTE KOLINK CORE 500W 80 PLUS WHITE",
        categoria:{
            nombre:"Fuente de Poder",
            id:"fuenteDePoder"
        },
        descripcion:{
            marca:"KOLINK",
            certificado:"80 Plus White",
            watts:"500w"
        },
        precio:40.00,
        imagen:"./img/FuenteDePoder4.jpg"
    },
    {
        id: "fuenteDePoder05",
        nombre: "FUENTE GIGABYTE P550B 550W 80 PLUS BRONZE",
        categoria:{
            nombre:"Fuente de Poder",
            id:"fuenteDePoder"
        },
        descripcion:{
            marca:"Gigabyte",
            certificado:"80 Plus Bronze",
            watts:"550w"
        },
        precio:55.50,
        imagen:"./img/FuenteDePoder5.jpg"
    },
    {
        id: "fuenteDePoder06",
        nombre: "FUENTE GIGABYTE P650G 650W 80 PLUS GOLD",
        categoria:{
            nombre:"Fuente de Poder",
            id:"fuenteDePoder"
        },
        descripcion:{
            marca:"Gigabyte",
            certificado:"80 Plus gold",
            watts:"650w"
        },
        precio:77.00,
        imagen:"./img/FuenteDePoder6.jpg"
    },
    {
        id: "fuenteDePoder07",
        nombre: "FUENTE ANTRYX KIRIN 650W 80 PLUS BRONZE",
        categoria:{
            nombre:"Fuente de Poder",
            id:"fuenteDePoder"
        },
        descripcion:{
            marca:"ANTRYX",
            certificado:"80 Plus Bronze",
            watts:"650w"
        },
        precio:61.50,
        imagen:"./img/FuenteDePoder7.jpg"
    },
    {
        id: "fuenteDePoder08",
        nombre: "FUENTE COOLER MASTER MWE 550 V2 550W 80 PLUS BRONZE ",
        categoria:{
            nombre:"Fuente de Poder",
            id:"fuenteDePoder"
        },
        descripcion:{
            marca:"Cooler Master",
            certificado:"80 Plus Bronze",
            watts:"550w"
        },
        precio:65.00,
        imagen:"./img/FuenteDePoder8.jpg"
    },
    {
        id: "fuenteDePoder09",
        nombre: "FUENTE COOLER MASTER MWE V2 750W 80 PLUS BRONZE ",
        categoria:{
            nombre:"Fuente de Poder",
            id:"fuenteDePoder"
        },
        descripcion:{
            marca:"Cooler Master",
            certificado:"80 Plus Bronze",
            watts:"750w"
        },
        precio:85.00,
        imagen:"./img/FuenteDePoder9.jpg"
    },
    {
        id: "fuenteDePoder10",
        nombre: "FUENTE COOLER MASTER V1100 SFX 1100W 80 PLUS PLATINUM FULL MODULAR",
        categoria:{
            nombre:"Fuente de Poder",
            id:"fuenteDePoder"
        },
        descripcion:{
            marca:"Cooler Master",
            certificado:"80 Plus Platinum",
            watts:"1100w"
        },
        precio:435.00,
        imagen:"./img/FuenteDePoder10.jpg"
    },
];
/*Definiendo las variables*/
const productContainer=document.querySelector('#productContainer'),
    botnCategory=document.querySelectorAll(".categorybotn"),
    titleMain=document.querySelector("#titleMain"),
    windowModal=document.getElementById('windowModal'),
    windowContainer=document.getElementById('windowContainer'),
    closeButton=document.getElementById('closeButton'),
    productModal=document.querySelector('#productModal');
let botnView=document.querySelectorAll(".tooltip"),
    botnAdd=document.querySelectorAll(".botnAdd"),
    numProductsCart=document.querySelector('.numProductsCart');
let carrito;
let cantProduct=1,
    productsCart=0;

/*Funcion para cargar los productos segun la categoria elegida*/
function loadProducts(productSelect){
    productContainer.innerHTML="";
    productSelect.forEach(p=>{
        const div=document.createElement("div");
        div.classList.add("product");
        div.innerHTML=`
            <div class="iconoCapa">
                <img src="${p.imagen}" alt="${p.categoria.nombre}">
                <div class="tooltip" id="${p.id}">
                    <span class="tooltipTop">Vista rápida</span>
                    <i class="fa-regular fa-eye"></i>
                </div>
            </div>
            <div class="productInfo">
                <h2>${p.nombre}</h2>
                <p>Precio: $${(p.precio).toFixed(2)}</p>
                <button id="${p.id}" class="botnAdd"><i class="fa-solid fa-cart-arrow-down"></i> Comprar</button>
            </div>
        `;
        productContainer.append(div);
    });
    actualizarBotonesAgregar();
    botnView=document.querySelectorAll(".tooltip");
    botnView.forEach(botn=>{
        botn.addEventListener('click',modalWindowView);
    });
}
loadProducts(producto);

/*Botones de las categorias*/
botnCategory.forEach(botn=>{
    botn.addEventListener("click", (e) =>{
        botnCategory.forEach(botn=>botn.classList.remove("selected"));
        e.currentTarget.classList.add("selected");

        if(e.currentTarget.id!="todos"){
            const productCategory=producto.find(producto=>producto.categoria.id===e.currentTarget.id);
            titleMain.innerText=productCategory.categoria.nombre;
            const productsBotn=producto.filter(producto=>producto.categoria.id===e.currentTarget.id);
            loadProducts(productsBotn);
        }else{
            titleMain.innerText="Todos los productos";
            loadProducts(producto);
        }
        
    });
});

/*Funcion para abrir venta de vista rapida del producto*/
function modalWindowView(e){
    windowModal.style.display='flex';
        productModal.innerHTML="";
        producto.forEach(p=>{
            if(e.currentTarget.id==p.id){
                const div=document.createElement("div");
                div.classList.add("viewProductModal");
                const ul = document.createElement("ul");
                for (const clave in p.descripcion) {
                    if (p.descripcion.hasOwnProperty(clave)) {
                        const valor = p.descripcion[clave];
                        const li = document.createElement("li");
                        li.textContent = (clave.charAt(0).toUpperCase() + clave.slice(1)) + ": " + valor;
                        ul.appendChild(li);
                    }
                }
                div.innerHTML=`
                <figure>
                    <img src="${p.imagen}" alt="${p.categoria.nombre}">
                </figure>
                <div class="productInfoModal">
                    <h2 class="titleModal">${p.nombre}</h2>
                    ${ul.outerHTML}
                    <p>Precio: $${p.precio}</p>
                    <div class="botnModal">
                        <div class="botnCant">
                            <span class="minus">-</span>
                            <span class="numCant">1</span>
                            <span class="plus">+</span>
                        </div>
                        <button id="${p.id}" class="botnAdd"><i class="fa-solid fa-cart-arrow-down"></i> Comprar</button>
                    </div>
                </div>
                `;
                productModal.append(div);
            };
        });
        actualizarBotonesAgregar();
        
        /*Varibales y eventos de los botones + y - dentro de la ventana de vista rapida*/
        let numCant=document.querySelector('.numCant'),
            plus=document.querySelector('.plus'),
            minus=document.querySelector('.minus');
        plus.addEventListener('click',()=>{
            cantProduct++;
            numCant.innerText=cantProduct;
        });
        minus.addEventListener('click',()=>{
            if(cantProduct>1){
                cantProduct--;
                numCant.innerText=cantProduct;
            }
        });
}
/*Funcion para renderizar botones COMPRAR*/
function actualizarBotonesAgregar(){
    botnAdd=document.querySelectorAll(".botnAdd");
    botnAdd.forEach(botn=>{
        botn.addEventListener('click',agregarCarrito);
    });
    
}
/*Funcion para agregar productos al carrito y guardarlo en almacenamiento local*/
function agregarCarrito(e){
    const enCarrito=carrito.find(p=>p.id==e.currentTarget.id);
    if(enCarrito){
        enCarrito.cantidad+=cantProduct;
        console.log(enCarrito.cantidad);
    }else{
        let findProduct = producto.find(p => p.id == e.currentTarget.id);
        findProduct.cantidad=cantProduct;
        carrito.push(findProduct);
    }
    productsCart+=cantProduct;
    if(productsCart<10){
        numProductsCart.innerText="0"+productsCart;
    }else{
        numProductsCart.innerText=productsCart;
    }
    localStorage.setItem("carrito",JSON.stringify(carrito));
}

/*Funcion para cerrar venta de vista rapida*/
const closeWindow=()=>{
    windowContainer.classList.add('close');

    setTimeout(()=>{
        windowContainer.classList.remove('close');
        windowModal.style.display='none';
    },500);
    cantProduct=1;
};
closeButton.addEventListener('click',()=>closeWindow());
window.addEventListener('click',e=>e.target==windowModal&&closeWindow());

/*Obteniendo datos del carrito, del almacenamiento local*/
let productsInCart=localStorage.getItem("carrito")
if(productsInCart){
    carrito=JSON.parse(productsInCart);
    if(carrito.reduce((acc,c)=> acc+c.cantidad,0)<10){
        numProductsCart.innerText="0"+carrito.reduce((acc,c)=> acc+c.cantidad,0);
    }else{
        numProductsCart.innerText=carrito.reduce((acc,c)=> acc+c.cantidad,0);
    }
}else{
    carrito=[];
}
productsCart=carrito.reduce((acc,c)=> acc+c.cantidad,0);

